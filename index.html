<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>MMA player</title>
  <link rel="stylesheet" type="text/css" href="//yazgoo.github.io/wild-web-midi/midi-player.css" />
</head>
<body>
  <div id=midi_player></div>
  <script src="//yazgoo.github.io/wild-web-midi/midi-player.js"></script>
  <script src="//yazgoo.github.io/wild-web-midi/web_audio_player.js"></script>
  <script async type="text/javascript" src="//yazgoo.github.io/wild-web-midi/wildwebmidi.js"></script>
</body>
<script>
var worker = new Worker("worker.js")
song = `
Groove Rhumba
0 FM7 / Ab7
1 DbM7 / E7
2 AM7 / C7
3 Cm7 / F7
4 BbM7 / Db7
5 GbM7 / A7
6 Dm7 / G7
7 Gm7 C7 FM7 Ab7
8 DbM7 / E7
9 AM7 / C7
10 Cm7 / F7
11 BbM7 / Ab7
12 DbM7 / E7
13 AM7 / C7
14 FM7   
15 Cm7 / F7
16 Em7 / A7
17 DM7 / F7
18 BbM7   
19 Ebm7   
20 Ab7   
21 DbM7   
22 Gm7 C7 
23 FM7 / Ab7
24 DbM7 / E7
25 AM7 / C7
26 Cm7 / F7
27 BbM7 / Ab7
28 DbM7 / E7
29 AM7 / C7
30 FM7`
worker.postMessage([song]);
console.log('Message posted to worker');
worker.onmessage = function(e) {
	console.log('Message received from worker');
	console.log(btoa(e.data));
	data = e.data
  console.log("playing " + data);
  play(data);
}
</script>
